function leadin_submit_form(a,b,c){var d=a,e=[],f="",g="",h="",i="",j=c?c:"lead";d.find('input[type!="submit"], textarea').not('input[type="hidden"], input[type="radio"], input[type="password"]').each(function(){var a=b(this),c=a.val();if(!a.is(":visible"))return!0;var j=b("label[for='"+a.attr("id")+"']").text();0==j.length&&(j=a.prev("label").not(".li_used").addClass("li_used").first().text(),j.length||(j=a.prevAll("b, strong, span").text())),0==j.length&&(j=a.next("label").not(".li_used").addClass("li_used").first().text(),j.length||(j=a.nextAll("b, strong, span").text())),0==j.length&&(j=a.parent().find("label, b, strong").not(".li_used").first().text()),0==j.length&&b.contains(d,a.parent().parent())&&(j=a.parent().parent().find("label, b, strong").first().text()),0==j.length&&($p=a.closest("p").not(".li_used").addClass("li_used"),$p.length&&(j=$p.text(),j=b.trim(j.replace(c,"")))),0==j.length&&void 0!==a.attr("placeholder")&&(j=a.attr("placeholder").toString()),0==j.length&&void 0!==a.attr("name")&&(j=a.attr("name").toString()),a.is(":checkbox")&&(c=a.is(":checked")?"Checked":"Not checked");var k=b.trim(j.replaceArray(["(",")","required","Required","*",":"],[""]));push_form_field(k,c,e),-1==c.indexOf("@")||-1==c.indexOf(".")||f||(f=c),"leadin-subscribe-fname"==a.attr("id")&&(g=c),"leadin-subscribe-lname"==a.attr("id")&&(h=c),"leadin-subscribe-phone"==a.attr("id")&&(i=c)});var k=[],l=[];d.find(":radio").each(function(){-1==b.inArray(this.name,k)&&k.push(this.name),l.push(b(this).val())});for(var m=0;m<k.length;m++){{var n=b("input:radio[name='"+k[m]+"']");b("input:radio[name='"+k[m]+"']:checked").val()}$p=d.find(".gfield").length?n.closest(".gfield").not(".li_used").addClass("li_used"):d.find(".frm_form_field").length?n.closest(".frm_form_field").not(".li_used").addClass("li_used"):n.closest("div, p").not(".li_used").addClass("li_used"),$p.length&&($rbg_label=$p.text(),$rbg_label=b.trim($rbg_label.replaceArray(l,[""]).replace($p.find(".gfield_description").text(),"")));var o=b("input:radio[name='"+k[m]+"']:checked").val()?b("input:radio[name='"+k[m]+"']:checked").val():"not selected";push_form_field($rbg_label,o,e)}if(d.find("select").each(function(){var a=b(this),c=b("label[for='"+a.attr("id")+"']").text();if(!c.length){var f=[];a.find("option").each(function(){-1==b.inArray(b(this).val(),f)&&f.push(b(this).val())}),$p=a.closest("div, p").not(".li_used").addClass("li_used"),$p=d.find(".gfield").length?a.closest(".gfield").not(".li_used").addClass("li_used"):a.closest("div, p").addClass("li_used"),$p.length&&(c=$p.text(),c=b.trim(c.replaceArray(f,[""]).replace($p.find(".gfield_description").text(),"")))}push_form_field(c,a.val(),e)}),d.find(".li_used").removeClass("li_used"),d.find("#comment_post_ID").length&&(j="comment"),f){var p=Math.random().toString(36).slice(2),q=b.cookie("li_hash"),r=JSON.stringify(e),s={};s={submission_hash:p,hashkey:q,lead_email:f,lead_first_name:g,lead_last_name:h,lead_phone:i,page_title:page_title,page_url:page_url,json_form_fields:r,form_submission_type:j},b.cookie("li_submission",JSON.stringify(s),{path:"/",domain:""}),leadin_insert_form_submission(p,q,page_title,page_url,r,f,g,h,i,j,function(){b.removeCookie("li_submission",{path:"/",domain:""})})}else form_saved=!0}function leadin_check_merged_contact(a){jQuery.ajax({type:"POST",url:li_ajax.ajax_url,data:{action:"leadin_check_merged_contact",li_id:a},success:function(a){var b=jQuery.parseJSON(a);b&&jQuery.cookie("li_hash",b,{path:"/",domain:""})},error:function(){}})}function leadin_check_visitor_status(a,b){jQuery.ajax({type:"POST",url:li_ajax.ajax_url,data:{action:"leadin_check_visitor_status",li_id:a},success:function(a){var c=jQuery.parseJSON(a);b&&b(c)},error:function(){}})}function leadin_log_pageview(a,b,c,d,e){jQuery.ajax({type:"POST",url:li_ajax.ajax_url,data:{action:"leadin_log_pageview",li_id:a,li_title:b,li_url:c,li_referrer:d,li_last_visit:e},success:function(){},error:function(){}})}function leadin_insert_lead(a,b){jQuery.ajax({type:"POST",url:li_ajax.ajax_url,data:{action:"leadin_insert_lead",li_id:a,li_referrer:b},success:function(){},error:function(){}})}function leadin_insert_form_submission(a,b,c,d,e,f,g,h,i,j,k){jQuery.ajax({type:"POST",url:li_ajax.ajax_url,data:{action:"leadin_insert_form_submission",li_submission_id:a,li_id:b,li_title:c,li_url:d,li_fields:e,li_email:f,li_first_name:g,li_last_name:h,li_phone:i,li_submission_type:j},success:function(a){k&&k(a)},error:function(){}})}function push_form_field(a,b,c){var d={label:a,value:b};c.push(d)}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});var page_title=jQuery(document).find("title").text(),page_url=window.location.href,page_referrer=document.referrer,form_saved=!1;jQuery(document).ready(function(a){var b=a.cookie("li_hash"),c=a.cookie("li_submission");if(c){var d=JSON.parse(c);leadin_insert_form_submission(d.submission_hash,d.hashkey,d.page_title,d.page_url,d.json_form_fields,d.lead_email,d.lead_first_name,d.lead_last_name,d.lead_phone,d.form_submission_type,function(){a.removeCookie("li_submission",{path:"/",domain:""})})}b||(b=Math.random().toString(36).slice(2),a.cookie("li_hash",b,{path:"/",domain:""}),leadin_insert_lead(b,page_referrer)),leadin_log_pageview(b,page_title,page_url,page_referrer,a.cookie("li_last_visit"));var e=new Date,f=e.getTime();e.setTime(e.getTime()+36e5),a.cookie("li_last_visit")||leadin_check_merged_contact(b),a.cookie("li_last_visit",f,{path:"/",domain:"",expires:e})}),jQuery(function(a){-1!=a.versioncompare(a.fn.jquery,"1.7.0")?a(document).on("submit","form",function(){var b=a(this).closest("form");leadin_submit_form(b,a)}):a(document).bind("submit","form",function(){var b=a(this).closest("form");leadin_submit_form(b,a)})}),String.prototype.replaceArray=function(a,b){for(var c=this,d=0;d<a.length;d++)c=1!=b.length?c.replace(a[d],b[d]):c.replace(a[d],b[0]);return c},function(a){function b(b){return a.map(b.split("."),function(a){return parseInt(a,10)})}a.versioncompare=function(c,d){if("undefined"==typeof c)throw new Error("$.versioncompare needs at least one parameter.");if(d=d||a.fn.jquery,c==d)return 0;for(var e=b(c),f=b(d),g=Math.max(e.length,f.length),h=0;g>h;h++)if(e[h]=e[h]||0,f[h]=f[h]||0,e[h]!=f[h])return e[h]>f[h]?1:-1;return 0}}(jQuery);